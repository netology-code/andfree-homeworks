# Домашнее задание к занятию 3. Взаимодействие со сторонними сервисами 
Для получения коротких текстовых ответов на текстовые вопросы существует удобный сервис от Wolfram Alpha, а именно [Short Answer API](https://products.wolframalpha.com/simple-api/documentation/). В этом домашнем задании вам необходимо добавить взаимодействие с этим сервисом в ваше приложение.
 

## Задание 1. Внедрение Wolfram Alpha SDK
Зарегестрируйтесь на сервере **Wolfram Alpha** и добавьте **Wolfram Alpha SDK** в проект, чтобы разблокировать полный функционал запросов. 

Для тестирования ограниченного количества запросов (напр., How big is the universe?) можно ограничиться тестовым ключом "DEMO".

### Инструкция
1. Зарегистрируйтесь как разработчик в Wolfram Alpha по [ссылке](https://account.wolfram.com/login/create).
2. Получите AppID. Для этого перейдите по [ссылке](https://developer.wolframalpha.com/portal/myapps/index.html), нажмите **Get an AppID**. Обратите внимание, что после получения AppID надо подождать несколько часов, прежде чем он начнёт работать.
3. Перейдите на [страницу библиотек Wolfram Alpha.](https://products.wolframalpha.com/api/libraries) Выберите из раздела Simple APIs сборку Java Binding (v1.1). Нажмите Download. После этого должен скачаться zip-архив. Внутри несколько файлов, в том числе файл с расширением `jar`.
4. Поместите файл библиотеки `WolframAlpha-1.1.jar` в папку `libs`.
5. Добавьте папку `libs` как источник библиотек (если этого ещё не сделано). Для этого откройте файл `build.gradle` в модуле `app`. Воспользуйтесь поиском (двойное нажатие на Shift), на этот раз по файлам. Введите `build.gradle` и выберите тот, около которого написано `app`. Там находится список всех библиотек проекта.
6. Проверьте, есть ли в файле `build.gradle` в блоке `dependencies` упоминание папки `libs`. Если такой строки нет, то добавьте её. 
```
implementation files('libs/WolframAlpha-1.1.jar')
```
7. Запустите действие `Sync Project with Gradle Files` из поиска (2 * Shift), чтобы обновить зависимости и подключить библиотеку.


## Задание 2. Настройка AndroidManifest
Настройте **AndroidManifest** приложения, чтобы открыть возможность производить запросы через интернет.

### Инструкция
1. Включите поддержку HTTP и старой библиотеки. Для этого в файле `AndroidManifest.xml` добавьте строки: 
```xml
android:usesCleartextTraffic="true"
```
и 
```xml
<uses-library android:name="org.apache.http.legacy" android:required="false"/>
```
2. Добавьте в приложение запрос разрешения на доступ в интернет. Для этого добавьте следующий код (выделен жёлтым) в файл `AndroidManifest.xml`. 
```xml
<uses-permission android:name="android.permission.INTERNET"/>
```

## Задание 3. Инициализация движка Wolfram
Для работы с сервисом **Wolfram** будем использовать движок WAEngine, который располагается в скаченном ранее SDK.

### Инструкция
1. Создайте метод, в котором проинициализируйте движок WAEngine.
2. В качестве appID можете использовать либо DEMO ключ для ограниченного количества запросов, либо использовать ключ, полученный при регистрации в сервисе. 


## Задание 4. Снэкбар
Для отображения различной информации пользователю можно использовать **Snackbar**. В нашем случае, будем использовать его для отображения ошибок при выполнении программы.

### Инструкция
1. Вынесите создание и отображения Snackbar в отдельный метод. Вероятнее всего, он будет вызываться не один раз.
2. Сделайте Snackbar перманентным.
3. Добавьте действие "ОК", которое бы закрывала Snackbar.


## Задание 5. Коррутины
Для асинхронной работы будет использовать библиотеку с коррутинами **kotlinx-coroutines-android**.

### Инструкция
1. В gradle файл модуля app добавьте зависимость на библиотеку:
```
implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.4.3'
```

## Задание 6. Запрос на сервер
Реализуйте возможность задавать вопросы и получать ответы через **Wolfram Alpha** в вашем приложении.

### Инструкция
1. Создайте функцию для запроса сервера Wolfram с использованием сопрограммы с учетом того, что запрос на сервер должен быть исполнен в IO потоке, а вывод информации пользователю - в Main потоке.
2. Реализуйте действие кнопки по завершению печати на клавиатуре для запроса вызова созданного метода и запроса на сервер.
3. Добавьте логику очистки списка с ответами сервера при нажатии на кнопку меню "Очистка".

Любые вопросы по решению задач задавайте в чате в Telegram.
